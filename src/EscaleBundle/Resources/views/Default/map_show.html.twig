{% extends 'base.html.twig' %}

{% block body %}

    <div class="row barre_de_recherche">
        <div class="col m6 s12 offset-m3 input_search">
            <input id="pac-input" class="controls" type="text" value="{% if location is not null %}{{ location }}{% endif %}" placeholder="Où ?">
            <a href="{{ path('map') }}" id="geolocalisation_button" class="geolocalisation_button"><img src="{{ asset('bundles/escale/images/GeoLoc.jpg') }}"></a>
            <a class="waves-effect waves-light btn get_map" id="googlemap">Rechercher</a>
        </div>
    </div>

    <div id="map" style="height: 40%"></div>

    <div class="container row1">
        <div class="row">
            <div class="col s12 m4">
                <div class="card">
                    <div class="card-image">
                        <img src="{{ asset('uploads/img/HandPaddle.jpg') }}">
                        <span class="card-title"></span>
                    </div>
                    <div class="card-content">
                        <p>I am a very simple card. I am good at containing small bits of information.
                            I am convenient because I require little markup to use effectively.</p>
                    </div>
                    <div class="card-action">
                        <a href="#">This is a link</a>
                    </div>
                </div>
            </div>
            <div class="col s12 m4">
                <div class="card">
                    <div class="card-image">
                        <img src="{{ asset('uploads/img/velo.jpg') }}">
                        <span class="card-title"></span>
                    </div>
                    <div class="card-content">
                        <p>I am a very simple card. I am good at containing small bits of information.
                            I am convenient because I require little markup to use effectively.</p>
                    </div>
                    <div class="card-action">
                        <a href="#">This is a link</a>
                    </div>
                </div>
            </div>
            <div class="col s12 m4">
                <div class="card">
                    <div class="card-image">
                        <img src="{{ asset('uploads/img/Kitesurf.jpg') }}">
                        <span class="card-title"></span>
                    </div>
                    <div class="card-content">
                        <p>I am a very simple card. I am good at containing small bits of information.
                            I am convenient because I require little markup to use effectively.</p>
                    </div>
                    <div class="card-action">
                        <a href="#">This is a link</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row row2">

        <h3 style="text-align: center">Indiques les dates de présences sur ce spot et pourquoi pas communiquer l'information à ta communauté.</h3>

        <form action="{{ path("visite_new") }}" method="post">
            <div class="row date_picker" style="margin-top: 70px">
                <div class="col m4 s6 offset-m1">
                    <label style="color: white; font-size: 16px">Arrivée</label>
                    <input type="date" name="start" class="datepicker">
                </div>
                <div class="col m4 s6">
                    <label style="color: white; font-size: 16px">Départ</label>
                    <input type="date" name="end" class="datepicker">
                </div>
                <div class="col m2 s4">
                    <input type="submit" class="waves-effect waves-light btn btn_page3" style="position: relative; bottom: -35px; width: 250px; background-color: #D55449; color: white;">Valider</input>
                </div>
            </div>
            <div class="row">
                <div class="col s4 offset-s1">
                    <p>
                        <input type="checkbox" id="test6" checked="checked" />
                        <label for="test6">Yellow</label>
                    </p>
                </div>
            </div>
        </form>
    </div>

    <div class="row3">
        <div class="row">
            <h3 style="color: black; text-align: center; font-family: exo2">
                Ma communauté présente sur le spot
            </h3>
        </div>
        <div class="row">
            <div class="col m4">
                <div class="card-panel grey lighten-5 z-depth-1">
                    <div class="row valign-wrapper">
                        <div class="col s2">
                            <img src="{{ asset('uploads/user/sur-le-tournage-brice-de-nice-3_3490324.jpg') }}" alt="" class="circle responsive-img"> <!-- notice the "circle" class -->
                        </div>
                        <div class="col s10">
                      <span class="black-text">
                        Brice De nice
                      </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col m4">
                <div class="card-panel grey lighten-5 z-depth-1">
                    <div class="row valign-wrapper">
                        <div class="col s2">
                            <img src="{{ asset('uploads/user/zoom-surfeuses-roxy-pro.jpg') }}" alt="" class="circle responsive-img"> <!-- notice the "circle" class -->
                        </div>
                        <div class="col s10">
                      <span class="black-text">
                        Roxy
                      </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>


{% endblock %}


{% block javascripts %}

    {{ parent() }}

    <script>
        $('.datepicker').pickadate({
            selectMonths: true, // Creates a dropdown to control month
            selectYears: 15 // Creates a dropdown of 15 years to control year
        });
    </script>

    <script>
        function initMap() {

            var myLatLng6 = {lat: 46.7903464, lng: -2.083200799999};
            var myLatLng1 = {lat: 46.786695, lng: -2.043959};
            var myLatLng2 = {lat: 46.784418, lng: -2.048776};
            var myLatLng3 = {lat: 46.785907, lng: -2.057146};
            var myLatLng4 = {lat: 46.784651, lng:  -2.057884};
            var myLatLng5 = {lat: 46.783718, lng: -2.057667};
            var myLatLng = {lat: 46.78573, lng: -2.059292};

            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 14,
                center: myLatLng,
                mapTypeId: google.maps.MapTypeId.SATELLITE
            });

            var image = {
                url: '{{ asset('uploads/picto_categ/Velo.png') }}'
            };
            var image1 = {
                url: '{{ asset('uploads/picto_sport/CerfVolant.png') }}'
            };

            var image2 = {
                url: '{{ asset('uploads/picto_sport/HandPaddle.png') }}'
            };

            var image3 = {
                url: '{{ asset('uploads/picto_sport/Kite.png') }}'
            };

            var image4 = {
                url: '{{ asset('uploads/picto_sport/Surf.png') }}'
            };

            var image5 = {
                url: '{{ asset('uploads/picto_sport/gite.png') }}'
            };

            var marker = new google.maps.Marker({
                position: myLatLng1,
                title: 'plop!',
                icon: image
            });
            var marker1 = new google.maps.Marker({
                position: myLatLng2,
                title: 'plop1',
                icon: image1
            });
            var marker2 = new google.maps.Marker({
                position: myLatLng3,
                title: 'plop2',
                icon: image2
            });
            var marker3 = new google.maps.Marker({
                position: myLatLng4,
                title: 'plop6',
                icon: image3
            });
            var marker4 = new google.maps.Marker({
                position: myLatLng5,
                title: 'plop9',
                icon: image4
            });
            var marker5 = new google.maps.Marker({
                position: myLatLng6,
                title: 'plop10',
                icon: image5
            });

            marker.setMap(map);
            marker1.setMap(map);
            marker2.setMap(map);
            marker3.setMap(map);
            marker4.setMap(map);
            marker5.setMap(map);
        }
        </script>




            {#{% for service in services %}#}

            {#var myLatLng = {#}
                {#lat: {{ service.servGpsLat }},#}
                {#lng: {{ service.servGpsLng }}#}
            {#};#}

            {#var marker = new google.maps.Marker({#}
                {#position: myLatLng,#}
                {#map: map,#}
                {#title: '{{ service.servNom }}'#}
            {#});#}

            {#var contentString =#}
                    {#'<div class="row"><h2>{{ spot.spotNom }}</h2></div>' +#}
                    {#'<div class="row">'+#}
                    {#'<div class="col md6">'+#}
                    {#'<img src="#"/>'+#}
                    {#'</div>'+#}
                    {#'<div class="col md6">'+#}
                    {#'<p>{{ spot.spotDesc }}</p>'+#}
                    {#'</div>'+#}
                    {#'</div>'+#}
                    {#'<div class="row">'+#}
                    {#'<a class="waves-effect waves-light btn">J\'y vais !</a>'+#}
                    {#'</div>'+#}
                    {#'<div class="row">'+#}
                    {#'<h3>Météo sur 3 jours:</h3>'+#}
                    {#'<img src=""/>'+#}
                    {#'</div>';#}

            {#attachDescription(marker, contentString);#}

            {#{% endfor %}#}

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDn52jFrq8R0F1RoukKhtsjINbPDa1v984&libraries=places&callback=initMap"
            async defer>
    </script>

{% endblock %}